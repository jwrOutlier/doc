# 基本语法

* 项目创建命令

``` shell
npx create-react-app  projectName
```

* 组件编写

```js
export default function MyComponent () {
    return (
        <div className="my-component">
            我是组件
        </div>
    )
}
```

> 组件函数必须要以大写字母开头

* jsx 规则

1. 只能返回一个根元素，可以使用div包裹也可使用<></>
2. 标签必须闭合
3. 使用驼峰式命名法给 所有 大部分属性命名

* jsx 动态绑定数据

```js
const person = {
    name:'Cooper',
    theme:{
        backgroundColor: 'black',
        color: 'pink'
    }
}
export default function PersonInfo () {
    return (
        <div className="my-component" style={person.theme}>
            <h1>{person.name}</h1>
        </div>
    )
}

```

> 大括号中任何表达式都可以执行
> 当设置css属性或者是对象的时候需要使用双大括号

* 父子组件之间传值

```js
// 此处name 可以解构出来
function Person(props){
    return (
        <div>
            {props.name}
        </div>
    )
}

// 第一种传值
export default function Card (){
    const info = {
        name:'Cooper'
    }
    return (
        <div className="Card">
            <Person name={info.name}/>
        </div>
    )
}

// 第二种传值
export default function Card (){
    const info = {
        name:'Cooper'
    }
    return (
        <div className="Card">
            <Person {...info}/>
        </div>
    )
}
```

* 插槽

父组件使用props.children 来接受子组件

```js
function Avatar({ person, size }) {
  return (
    <img
      className="avatar"
      src={'https://i.imgur.com/' + person.imageId +size +'.jpg'}
      alt={person.name}
      width={size}
      height={size}
    />
  );
}


function Card({ children }) {
  return (
    <div className="card">
      {children}
    </div>
  );
}

export default function Profile() {
  return (
    <Card>
      <Avatar
        size={100}
        person={{
          name: 'Katsuko Saruhashi',
          imageId: 'YfeOqp2'
        }}
      />
    </Card>
  );
}
```

> 不要轻易在子组件中更改props的值 当你需要交互性时，你可以设置 state

* 条件渲染

```js
function Item({ name, isPacked }) {
  return (
    <li className="item">
      {name} {isPacked ? '✔' : 'x'}
    </li>
  );
}

export default function App() {
  return (
    <section>
      <h1>Sally Ride 的行李清单</h1>
      <ul>
        <Item
          isPacked={true}
          name="宇航服"
        />
        <Item
          isPacked={true}
          name="带金箔的头盔"
        />
        <Item
          isPacked={false}
          name="Tam 的照片"
        />
      </ul>
    </section>
  );
}
```

>除了三元表达式外，也可以使用if...else

* 渲染列表

```js
export default function App() {
  const people = [
    "凯瑟琳·约翰逊: 数学家",
    "马里奥·莫利纳: 化学家",
    "穆罕默德·阿卜杜勒·萨拉姆: 物理学家",
    "珀西·莱温·朱利亚: 化学家",
    "苏布拉马尼扬·钱德拉塞卡: 天体物理学家",
  ];
  return (
    <ul>
      {
        people.map((item, idx) => {
            return <li key={ idx }>{ item }</li>;
        })
      }
    </ul>
  );
}
```

* 事件函数

```js
function Button() {
  const handleClick = () => {
    alert('点击了')
  }

  return <button onClick={handleClick}>测试按钮</button>;
}

export default function App() {
  return <Button></Button>
}

```

> 注意你不应该在jsx中手动的去调用函数  例如：onClick={handleClick()}  这样式是错误的

* 将事件函数作为props传递（子传父）

```js
function Button({ handleClick }) {
  return <button onClick={handleClick}>测试按钮</button>;
}

export default function App() {
  const handleClick = () => {
    alert('点击了')
  }
  return <Button handleClick={handleClick}></Button>;
}
```

* 事件

```js
function Button({ onClick, children }) {
  const handleClick = (e) =>{
    e.stopPropagation();  // 阻止冒泡
    // e.preventDefault();  // 阻止默认事件
    onClick();
  }
  return (
    <button onClick={handleClick}>
      {children}
    </button>
  );
}

export default function Toolbar() {
  return (
    <div className="Toolbar" onClick={() => { alert('你点击了 toolbar ！')}}>
      <Button onClick={() => alert('正在播放！')}>
        播放电影
      </Button>
      <Button onClick={() => alert('正在上传！')}>
        上传图片
      </Button>
    </div>
  );
}

```

* 组件状态 State

```js
import { useState } from "react";

export default function App() {

  const [message, setMessage] = useState("没有改变内容之前")

  return (
    <div>
      <p>{message}</p>
      <button onClick={()=>{setMessage('内容改变了')}}>点击改变内容</button>
    </div>
  );
}
```

* 表单数据双向绑定

```js
import { useState } from 'react';

export default function App() {
  const [value, setValue] = useState('');

  const handleChange = e => {
    setValue(e.target.value)
  };

  const handleSubmit = () => {
    setValue('');
    alert(value)
  }
  return (
    <div>
      <input type="text" value={value} onChange={handleChange} />

      <button onClick={handleSubmit}>提交</button>
    </div>
  );
}
```

* useEffect

```js
// 组件挂载的时候和组件更新的时候都会执行
useEffect(() => {
    console.log('组件挂载');
})

// 只有组件挂载的时候执行一次，后面都不会执行
useEffect(() => {
    console.log('我只执行一次');
}, []);

// 当组件挂载时，以及依赖更新时执行
useEffect(() => {
    console.log('依赖更新-------------');
}, [value]);

// 组件卸载后执行
useEffect(() => {
    return () => {
        console.log('组件卸载');
    };
});
```
